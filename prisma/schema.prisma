// schema.prisma
datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_PRISMA_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  uid             String            @id @default(uuid())
  unum            Int               @unique @default(autoincrement())
  id              Int               @unique @default(autoincrement())
  email           String?           @unique
  survey          Survey[]          @relation("user_surveys")
  userImage       UserImage[]
  userImageResult UserImageResult[]
  createdAt       DateTime          @default(now())
  updatedAt       DateTime          @updatedAt

  @@map(name: "users")
}

model Survey {
  uid       String   @id @default(uuid())
  user      User?    @relation("user_surveys", fields: [uid], references: [uid])
  response  Json
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model UserImage {
  uid       String
  id        Int      @unique @default(autoincrement())
  user      User?    @relation(fields: [uid], references: [uid])
  url       String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model UserImageResult {
  uid       String
  id        Int      @unique @default(autoincrement())
  filename  String   @unique
  user      User?    @relation(fields: [uid], references: [uid])
  url       String   @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
